!function(t,n){"function"==typeof define&&define.amd?define([],function(){return t.Swipe=n()}):"object"==typeof exports?module.exports=n():t.Swipe=n()}(this,function(){function t(t,i){"use strict";function o(){b=w.children,T=b.length,b.length<2&&(i.continuous=!1),L.transitions&&i.continuous&&b.length<3&&(w.appendChild(b[0].cloneNode(!0)),w.appendChild(w.children[1].cloneNode(!0)),b=w.children),g=new Array(b.length),y=t.getBoundingClientRect().width||t.offsetWidth,w.style.width=b.length*y+"px";for(var n=b.length;n--;){var e=b[n];e.style.width=y+"px",e.setAttribute("data-index",n),L.transitions&&(e.style.left=n*-y+"px",d(n,k>n?-y:n>k?y:0,0))}i.continuous&&L.transitions&&(d(a(k-1),-y,0),d(a(k+1),y,0)),L.transitions||(w.style.left=k*-y+"px"),t.style.visibility="visible"}function s(){i.continuous?c(k-1):k&&c(k-1)}function r(){i.continuous?c(k+1):k<b.length-1&&c(k+1)}function a(t){return(b.length+t%b.length)%b.length}function u(){var t=k;return t>=T&&(t-=T),t}function c(t,n){if(k!==t){if(L.transitions){var e=Math.abs(k-t)/(k-t);if(i.continuous){var o=e;e=-g[a(t)]/y,e!==o&&(t=-e*b.length+t)}for(var s=Math.abs(k-t)-1;s--;)d(a((t>k?t:k)-s-1),y*e,0);t=a(t),d(k,y*e,n||D),d(t,0,n||D),i.continuous&&d(a(t-e),-(y*e),0)}else t=a(t),l(k*-y,t*-y,n||D);k=t,x(i.callback&&i.callback(u(),b[k]))}}function d(t,n,e){v(t,n,e),g[t]=n}function v(t,n,e){var i=b[t],o=i&&i.style;o&&(o.webkitTransitionDuration=o.MozTransitionDuration=o.msTransitionDuration=o.OTransitionDuration=o.transitionDuration=e+"ms",o.webkitTransform="translate("+n+"px,0)translateZ(0)",o.msTransform=o.MozTransform=o.OTransform="translateX("+n+"px)")}function l(t,n,e){if(!e)return void(w.style.left=n+"px");var o=+new Date,s=setInterval(function(){var r=+new Date-o;return r>e?(w.style.left=n+"px",S&&f(),i.transitionEnd&&i.transitionEnd.call(event,u(),b[k]),void clearInterval(s)):void(w.style.left=(n-t)*(Math.floor(r/e*100)/100)+t+"px")},4)}function f(){"next"==i.direction?M=setTimeout(r,S):"index"==i.direction&&(M=setTimeout(function(){c(0,D)},S))}function h(){S=0,clearTimeout(M)}function m(){h(),S=i.auto||0,f()}function p(t){return/^mouse/.test(t.type)}var E=function(){},x=function(t){setTimeout(t||E,0)},L={addEventListener:!!n.addEventListener,touch:"ontouchstart"in n||n.DocumentTouch&&e instanceof DocumentTouch,transitions:function(t){var n=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var e in n)if(void 0!==t.style[n[e]])return!0;return!1}(e.createElement("swipe"))};if(t){var b,g,y,T,w=t.children[0];i=i||{};var k=parseInt(i.startSlide,10)||0,D=i.speed||300;i.continuous=void 0!==i.continuous?i.continuous:!0,i.autoRestart=void 0!==i.autoRestart?i.autoRestart:!1;var M,z,S=i.auto||0,R={},I={},N={handleEvent:function(t){switch(t.type){case"mousedown":case"touchstart":this.start(t);break;case"mousemove":case"touchmove":this.move(t);break;case"mouseup":case"mouseleave":case"touchend":x(this.end(t));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":x(this.transitionEnd(t));break;case"resize":x(o)}i.stopPropagation&&t.stopPropagation()},start:function(t){var n=p(t)?t:t.touches[0];R={x:n.pageX,y:n.pageY,time:+new Date},z=void 0,I={},p(t)?(w.addEventListener("mousemove",this,!1),w.addEventListener("mouseup",this,!1),w.addEventListener("mouseleave",this,!1)):(w.addEventListener("touchmove",this,!1),w.addEventListener("touchend",this,!1))},move:function(t){var n;if(p(t))n=t;else{if(t.touches.length>1||t.scale&&1!==t.scale)return;i.disableScroll&&t.preventDefault(),n=t.touches[0]}I={x:n.pageX-R.x,y:n.pageY-R.y},"undefined"==typeof z&&(z=!!(z||Math.abs(I.x)<Math.abs(I.y))),z||(t.preventDefault(),h(),i.continuous?(v(a(k-1),I.x+g[a(k-1)],0),v(k,I.x+g[k],0),v(a(k+1),I.x+g[a(k+1)],0)):(I.x=I.x/(!k&&I.x>0||k===b.length-1&&I.x<0?Math.abs(I.x)/y+1:1),v(k-1,I.x+g[k-1],0),v(k,I.x+g[k],0),v(k+1,I.x+g[k+1],0)))},end:function(t){var n=+new Date-R.time,e=Number(n)<250&&Math.abs(I.x)>20||Math.abs(I.x)>y/2,o=!k&&I.x>0||k===b.length-1&&I.x<0;i.continuous&&(o=!1);var s=I.x<0;z||(e&&!o?(s?(i.continuous?(d(a(k-1),-y,0),d(a(k+2),y,0)):d(k-1,-y,0),d(k,g[k]-y,D),d(a(k+1),g[a(k+1)]-y,D),k=a(k+1)):(i.continuous?(d(a(k+1),y,0),d(a(k-2),-y,0)):d(k+1,y,0),d(k,g[k]+y,D),d(a(k-1),g[a(k-1)]+y,D),k=a(k-1)),i.callback&&i.callback(u(),b[k])):i.continuous?(d(a(k-1),-y,D),d(k,0,D),d(a(k+1),y,D)):(d(k-1,-y,D),d(k,0,D),d(k+1,y,D))),p(t)?(w.removeEventListener("mousemove",N,!1),w.removeEventListener("mouseup",N,!1),w.removeEventListener("mouseleave",N,!1)):(w.removeEventListener("touchmove",N,!1),w.removeEventListener("touchend",N,!1))},transitionEnd:function(t){parseInt(t.target.getAttribute("data-index"),10)===k&&((S||i.autoRestart)&&m(),i.transitionEnd&&i.transitionEnd.call(t,u(),b[k]))}};return o(),S&&f(),L.addEventListener?(L.touch&&w.addEventListener("touchstart",N,!1),i.draggable&&w.addEventListener("mousedown",N,!1),L.transitions&&(w.addEventListener("webkitTransitionEnd",N,!1),w.addEventListener("msTransitionEnd",N,!1),w.addEventListener("oTransitionEnd",N,!1),w.addEventListener("otransitionend",N,!1),w.addEventListener("transitionend",N,!1)),n.addEventListener("resize",N,!1)):n.onresize=function(){o()},{setup:function(){o()},slide:function(t,n){h(),c(t,n)},prev:function(){h(),s()},next:function(){h(),r()},restart:function(){m()},stop:function(){h()},getPos:function(){return u()},getNumSlides:function(){return T},kill:function(){h(),w.style.width="",w.style.left="";for(var t=b.length;t--;){var e=b[t];e.style.width="",e.style.left="",L.transitions&&v(t,0,0)}L.addEventListener?(w.removeEventListener("touchstart",N,!1),w.removeEventListener("mousedown",N,!1),w.removeEventListener("webkitTransitionEnd",N,!1),w.removeEventListener("msTransitionEnd",N,!1),w.removeEventListener("oTransitionEnd",N,!1),w.removeEventListener("otransitionend",N,!1),w.removeEventListener("transitionend",N,!1),n.removeEventListener("resize",N,!1)):n.onresize=null}}}}var n=this,e=n.document;return(n.jQuery||n.Zepto)&&!function(n){n.fn.Swipe=function(e){return this.each(function(){n(this).data("Swipe",new t(n(this)[0],e))})}}(n.jQuery||n.Zepto),t});