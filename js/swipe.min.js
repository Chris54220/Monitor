!function(t,e){"function"==typeof define&&define.amd?define([],function(){return t.Swipe=e()}):"object"==typeof exports?module.exports=e():t.Swipe=e()}(this,function(){function t(t,i){"use strict";function o(){L=w.children,T=L.length,L.length<2&&(i.continuous=!1),b.transitions&&i.continuous&&L.length<3&&(w.appendChild(L[0].cloneNode(!0)),w.appendChild(w.children[1].cloneNode(!0)),L=w.children),g=new Array(L.length),y=t.getBoundingClientRect().width||t.offsetWidth,w.style.width=L.length*y+"px";for(var e=L.length;e--;){var n=L[e];n.style.width=y+"px",n.setAttribute("data-index",e),b.transitions&&(n.style.left=e*-y+"px",d(e,k>e?-y:e>k?y:0,0))}i.continuous&&b.transitions&&(d(a(k-1),-y,0),d(a(k+1),y,0)),b.transitions||(w.style.left=k*-y+"px"),t.style.visibility="visible"}function s(){i.continuous?c(k-1):k&&c(k-1)}function r(){i.continuous?c(k+1):k<L.length-1&&c(k+1)}function a(t){return(L.length+t%L.length)%L.length}function u(){var t=k;return t>=T&&(t-=T),t}function c(t,e){if(k!==t){if(b.transitions){var n=Math.abs(k-t)/(k-t);if(i.continuous){var o=n;n=-g[a(t)]/y,n!==o&&(t=-n*L.length+t)}for(var s=Math.abs(k-t)-1;s--;)d(a((t>k?t:k)-s-1),y*n,0);t=a(t),d(k,y*n,e||D),d(t,0,e||D),i.continuous&&d(a(t-n),-(y*n),0)}else t=a(t),v(k*-y,t*-y,e||D);k=t,x(i.callback&&i.callback(u(),L[k]))}}function d(t,e,n){l(t,e,n),g[t]=e}function l(t,e,n){var i=L[t],o=i&&i.style;o&&(o.webkitTransitionDuration=o.MozTransitionDuration=o.msTransitionDuration=o.OTransitionDuration=o.transitionDuration=n+"ms",o.webkitTransform="translate("+e+"px,0)translateZ(0)",o.msTransform=o.MozTransform=o.OTransform="translateX("+e+"px)")}function v(t,e,n){if(!n)return void(w.style.left=e+"px");var o=+new Date,s=setInterval(function(){var r=+new Date-o;return r>n?(w.style.left=e+"px",S&&f(),i.transitionEnd&&i.transitionEnd.call(event,u(),L[k]),void clearInterval(s)):void(w.style.left=(e-t)*(Math.floor(r/n*100)/100)+t+"px")},4)}function f(){"next"==i.direction?M=setTimeout(r,S):"index"==i.direction&&(M=setTimeout(function(){c(0,D)},S))}function h(){S=0,clearTimeout(M)}function m(){h(),S=i.auto||0,f()}function p(t){return/^mouse/.test(t.type)}var E=function(){},x=function(t){setTimeout(t||E,0)},b={addEventListener:!!e.addEventListener,touch:"ontouchstart"in e||e.DocumentTouch&&n instanceof DocumentTouch,transitions:function(t){var e=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var n in e)if(void 0!==t.style[e[n]])return!0;return!1}(n.createElement("swipe"))};if(t){var L,g,y,T,w=t.children[0];i=i||{};var k=parseInt(i.startSlide,10)||0,D=i.speed||300;i.continuous=void 0!==i.continuous?i.continuous:!0,i.autoRestart=void 0!==i.autoRestart?i.autoRestart:!1;var M,z,S=i.auto||0,N={},P={},R={handleEvent:function(t){switch(t.type){case"mousedown":case"touchstart":this.start(t);break;case"mousemove":case"touchmove":this.move(t);break;case"mouseup":case"mouseleave":case"touchend":x(this.end(t));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":x(this.transitionEnd(t));break;case"resize":x(o)}i.stopPropagation&&t.stopPropagation()},start:function(t){var e=p(t)?t:t.touches[0];N={x:e.pageX,y:e.pageY,time:+new Date},z=void 0,P={},p(t)?(w.addEventListener("mousemove",this,!1),w.addEventListener("mouseup",this,!1),w.addEventListener("mouseleave",this,!1)):(w.addEventListener("touchmove",this,!1),w.addEventListener("touchend",this,!1))},move:function(t){var e;if(p(t))e=t;else{if(t.touches.length>1||t.scale&&1!==t.scale)return;i.disableScroll&&t.preventDefault(),e=t.touches[0]}P={x:e.pageX-N.x,y:e.pageY-N.y},"undefined"==typeof z&&(z=!!(z||Math.abs(P.x)<Math.abs(P.y))),z||(t.preventDefault(),h(),i.continuous?(l(a(k-1),P.x+g[a(k-1)],0),l(k,P.x+g[k],0),l(a(k+1),P.x+g[a(k+1)],0)):(P.x=P.x/(!k&&P.x>0||k===L.length-1&&P.x<0?Math.abs(P.x)/y+1:1),l(k-1,P.x+g[k-1],0),l(k,P.x+g[k],0),l(k+1,P.x+g[k+1],0)))},end:function(t){var e=+new Date-N.time,n=Number(e)<250&&Math.abs(P.x)<20,o=Number(e)<250&&Math.abs(P.x)>20||Math.abs(P.x)>y/2,s=!k&&P.x>0||k===L.length-1&&P.x<0;i.continuous&&(s=!1);var r=P.x<0;n&&document.elementFromPoint(N.x,N.y).click(),z||(o&&!s?(r?(i.continuous?(d(a(k-1),-y,0),d(a(k+2),y,0)):d(k-1,-y,0),d(k,g[k]-y,D),d(a(k+1),g[a(k+1)]-y,D),k=a(k+1)):(i.continuous?(d(a(k+1),y,0),d(a(k-2),-y,0)):d(k+1,y,0),d(k,g[k]+y,D),d(a(k-1),g[a(k-1)]+y,D),k=a(k-1)),i.callback&&i.callback(u(),L[k])):i.continuous?(d(a(k-1),-y,D),d(k,0,D),d(a(k+1),y,D)):(d(k-1,-y,D),d(k,0,D),d(k+1,y,D))),p(t)?(w.removeEventListener("mousemove",R,!1),w.removeEventListener("mouseup",R,!1),w.removeEventListener("mouseleave",R,!1)):(w.removeEventListener("touchmove",R,!1),w.removeEventListener("touchend",R,!1))},transitionEnd:function(t){parseInt(t.target.getAttribute("data-index"),10)===k&&((S||i.autoRestart)&&m(),i.transitionEnd&&i.transitionEnd.call(t,u(),L[k]))}};return o(),S&&f(),b.addEventListener?(b.touch&&w.addEventListener("touchstart",R,!1),i.draggable&&w.addEventListener("mousedown",R,!1),b.transitions&&(w.addEventListener("webkitTransitionEnd",R,!1),w.addEventListener("msTransitionEnd",R,!1),w.addEventListener("oTransitionEnd",R,!1),w.addEventListener("otransitionend",R,!1),w.addEventListener("transitionend",R,!1)),e.addEventListener("resize",R,!1)):e.onresize=function(){o()},{setup:function(){o()},slide:function(t,e){h(),c(t,e)},prev:function(){h(),s()},next:function(){h(),r()},restart:function(){m()},stop:function(){h()},getPos:function(){return u()},getNumSlides:function(){return T},kill:function(){h(),w.style.width="",w.style.left="";for(var t=L.length;t--;){var n=L[t];n.style.width="",n.style.left="",b.transitions&&l(t,0,0)}b.addEventListener?(w.removeEventListener("touchstart",R,!1),w.removeEventListener("mousedown",R,!1),w.removeEventListener("webkitTransitionEnd",R,!1),w.removeEventListener("msTransitionEnd",R,!1),w.removeEventListener("oTransitionEnd",R,!1),w.removeEventListener("otransitionend",R,!1),w.removeEventListener("transitionend",R,!1),e.removeEventListener("resize",R,!1)):e.onresize=null}}}}var e=this,n=e.document;return(e.jQuery||e.Zepto)&&!function(e){e.fn.Swipe=function(n){return this.each(function(){e(this).data("Swipe",new t(e(this)[0],n))})}}(e.jQuery||e.Zepto),t});